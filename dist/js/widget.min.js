var RiseVision=RiseVision||{};if(RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Validation=function(){"use strict";function e(e,t){var n=e.value.trim();return a.test(n)?parseFloat(n)>parseFloat(t):!1}function t(e,t){var n=e.value.trim();return a.test(n)?parseFloat(n)<parseFloat(t):!1}function n(e){var t=e.value.trim();return s.test(t)}function i(e){var t=e.value.trim(),n=!1;return"checkbox"===e.type||"radio"===e.type?e.checked===!0&&(n=!0):null!==t&&""!==t&&(n=!0),n}function r(e){var t=e.value.trim();return-1===t.indexOf("://")&&(t="http://"+t),o.test(t)}var o=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,s=/^(\-|\+)?([0-9]+|Infinity)$/,a=/^\-?[0-9]*\.?[0-9]+$/;return{isGreaterThan:e,isLessThan:t,isValidRequired:i,isValidURL:r,isValidNumber:n}}(),RiseVision.Common.Utilities=function(){function e(e,t){var n="font-family:"+t.font.family+"; ",i="color: "+t.color+"; ",r="font-size: "+t.size+"px; ",o="font-weight: "+(t.bold?"bold":"normal")+"; ",s="font-style: "+(t.italic?"italic":"normal")+"; ",a="text-decoration: "+(t.underline?"underline":"none")+"; ",c="background-color: "+t.highlightColor+"; ";return"."+e+" {"+n+i+r+o+s+a+c+"}"}function t(e){for(var t=document.createElement("style"),n=0,i=e.length;i>n;n++)t.appendChild(document.createTextNode(e[n]));document.head.appendChild(t)}function n(n,o){n.forEach(function(n){n.class&&n.fontSetting&&t([e(n.class,n.fontSetting)]),n.fontSetting.font.type&&("custom"===n.fontSetting.font.type&&n.fontSetting.font.family&&n.fontSetting.font.url?i(n.fontSetting.font.family,n.fontSetting.font.url,o):"google"===n.fontSetting.font.type&&n.fontSetting.font.family&&r(n.fontSetting.font.family,o))})}function i(e,t,n){var i=null,r="font-family: "+e+"; src: url('"+t+"');";n=n||document,i=n.styleSheets[0],null!==i&&i.addRule("@font-face",r)}function r(e,t){var n=document.createElement("link");t=t||document,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","https://fonts.googleapis.com/css?family="+e),null!==n&&t.getElementsByTagName("head")[0].appendChild(n)}return{getFontCssStyle:e,addCSSRules:t,loadFonts:n,loadCustomFont:i,loadGoogleFont:r}}(),"undefined"!=typeof angular&&angular.module("risevision.widget.weather.config",[]).value("current","https://s3.amazonaws.com/widget-weather-test/0.1.0/dist/current.html").value("threeDay","https://s3.amazonaws.com/widget-weather-test/0.1.0/dist/three-day.html").value("currentAndThreeDay","https://s3.amazonaws.com/widget-weather-test/0.1.0/dist/current-and-three-day.html"),"undefined"==typeof config)var config={urlByName:decodeURI(decodeURIComponent("%68%74%74%70%3a%2f%2f%77%77%77%2e%74%69%6e%62%75%77%65%61%74%68%65%72%2e%63%6f%6d%2f%77%78%5f%66%65%65%64%2f%77%78%5f%63%75%72%72%65%6e%74%5f%65%78%74%65%6e%64%65%64%5f%62%79%5f%6e%61%6d%65%2e%70%68%70%3f%70%61%73%73%63%6f%64%65%3d%72%69%73%65%64%69%73%70%6c%61%79%25%37%43%64%6b%61%63%26%6d%65%74%72%69%63%3d%66%61%6c%73%65")),urlByLocation:decodeURI(decodeURIComponent("%68%74%74%70%3a%2f%2f%77%77%77%2e%74%69%6e%62%75%77%65%61%74%68%65%72%2e%63%6f%6d%2f%77%78%5f%66%65%65%64%2f%77%78%5f%63%75%72%72%65%6e%74%5f%65%78%74%65%6e%64%65%64%5f%62%79%5f%6c%61%74%6c%6f%6e%2e%70%68%70%3f%70%61%73%73%63%6f%64%65%3d%72%69%73%65%64%69%73%70%6c%61%79%25%37%43%64%6b%61%63%26%6d%65%74%72%69%63%3d%66%61%6c%73%65"))};var RiseVision=RiseVision||{};RiseVision.Weather=RiseVision.Weather||{},RiseVision.Weather=function(e,t,n){"use strict";function i(){var n=f.address,i=null,o=null,s=null;"geolocation"===n?(i=new RiseVision.Weather.Geolocation(t),i.getWeather({success:r,error:c})):"display"===n?(o=new RiseVision.Weather.DisplayAddress(e),o.getWeather({success:r,error:c})):"custom"===n&&(s=new RiseVision.Weather.CustomAddress(t),s.getWeather(f.customAddress,{success:r,error:c}))}function r(e){var t="",r=null,a=null,c="",l="",m=0,h=0,p=!1,v=!1,w=null,A=[],R="",b=(new Date).getDay()+1,V=b+1>7?1:b+1,_=V+1>7?1:V+1;e?e.getElementsByTagName("cw_error").length>0?o():($(".container").show(),$(".error").hide(),n.init({fallbackLng:"en"},function(){if($(".container").i18n(),$.each(e.getElementsByTagName("observation"),function(e,n){return 0!==e&&(t=n.getAttribute("icon_name"),null!==t&&"cw_no_report_icon"!==t)?(r=this,!1):void 0}),null===r&&(r=e.getElementsByTagName("observation").length>1?e.getElementsByTagName("observation")[1]:e.getElementsByTagName("observation")[0]),r&&"three-day"!==f.layout&&(r.getAttribute("icon_name")?(s(r.getAttribute("icon_name"),$(".current-icon")),$(".current-icon").attr("title",r.getAttribute("description"))):$(".current-icon").hide(),$(".current-temp").html("celsius"===f.unit?u(r.getAttribute("temperature"))+"&#176;C":u(r.getAttribute("temperature"))+"&#176;F")),"custom"===f.description?($(".city").text(f.customDescription),p=!0):"service"===f.description&&(a=e.getElementsByTagName("location")[0],a&&(c=a.getAttribute("city_name"),a.getAttribute("state_name")&&(c+=", "+a.getAttribute("state_name")),$(".city").text(c),p=!0)),r&&(f.showHumidity?(l=n.t(r.getAttribute("wind_short")),isNaN(r.getAttribute("humidity"))||$(".humidity").text(n.t("humidity")+" "+r.getAttribute("humidity")+"%"),"mph"===f.windSpeed?r.getAttribute("wind_short")&&r.getAttribute("wind_speed")&&$(".wind").text(n.t("wind")+" "+l+" "+n.t("at")+" "+parseInt(r.getAttribute("wind_speed"))+" "+n.t("mph"),10):"kph"===f.windSpeed&&r.getAttribute("wind_short")&&r.getAttribute("wind_speed")&&(m=parseInt(r.getAttribute("wind_speed"),10),h=Math.round(1.609344*m),$(".wind").text(n.t("wind")+" "+l+" "+n.t("at")+" "+h+" "+n.t("kph"))),v=!0):$(".humidity-wind").hide()),p||v||$(".info").hide(),w=e.getElementsByTagName("forecast")){if("current"!==f.layout)for(var o=0;o<w.length;o++)R=parseInt(w[o].getAttribute("day_of_week"),10),R===b?A[0]=w[o]:R===V?A[1]=w[o]:R===_&&(A[2]=w[o]);$(".icon").each(function(e){A[e].getAttribute("icon_name")?(s(A[e].getAttribute("icon_name"),$(this)),$(this).attr("title",A[e].getAttribute("description"))):$(this).hide()}),$(".day-of-week").each(function(e){$(this).html(n.t(A[e].getAttribute("weekday").toLowerCase()))}),$(".temp").each(function(e){$(this).html(u(A[e].getAttribute("high_temp"))+"&#176; / "+u(A[e].getAttribute("low_temp"))+"&#176;")})}setTimeout(function(){i()},y)})):o(),g&&(g=!1,d())}function o(){g&&($(".container").hide(),$(".error").text("Unable to retrieve weather data for that location.").show()),setTimeout(function(){i()},v)}function s(e,t){var n=new Image,i="img/"+e+".png";n.onload=function(){t.attr("src",i),a()},n.onerror=function(){console.log("Image "+e+" not found on "+new Date+" for "+$(".city").text()),a()},n.src=i}function a(){m++,"current"===f.layout?1===m&&$(document).trigger("dataPopulated"):"three-day"===f.layout?3===m&&$(document).trigger("dataPopulated"):"current-and-three-day"===f.layout?4===m&&$(document).trigger("dataPopulated"):$(document).trigger("dataPopulated")}function c(e){e.length>0&&(console.log("Unable to connect to the weather service at "+new Date+". Please check your Internet connection."),setTimeout(function(){i()},v))}function u(e){return"celsius"===f.unit?parseInt(5*(e-32)/9,10):parseInt(e,10)}function d(){e.rpc.call("","rsevent_ready",null,h.getString("id"),!0,!0,!0,!0,!0)}function l(e,t){var n;if(Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]){if(Array.isArray(t)&&t.length>0){f=JSON.parse(t[0]);var r=[{"class":"current-tmep",fontSetting:f.currentTempFont},{"class":"forecast-temp",fontSetting:f.forecastTempFont},{"class":"forecast-day",fontSetting:f.forecastDayFont},{"class":"address",fontSetting:f.addressFont},{"class":"humidity",fontSetting:f.humidityFont}];p.loadFonts(r),document.body.style.background=f.background.color,f.terms||($(".container").hide(),$(".error").text("You must check the Acceptance setting in order to use this Gadget.").show(),d()),i()}}else Array.isArray(e)&&e.length>0&&"displayAddress"===e[0]&&Array.isArray(t)&&t.length>0&&(n=JSON.parse(t[0]))}var f,g=!0,m=0,h=new e.Prefs,p=RiseVision.Common.Utilities,y=18e5,v=6e4;return{setParams:l}}(gadgets,config,i18n);var RiseVision=RiseVision||{};RiseVision.Weather=RiseVision.Weather||{},RiseVision.Weather.Provider={},RiseVision.Weather.Provider=function(){"use strict";function e(e,t){var n={};n[gadgets.io.RequestParameters.CONTENT_TYPE]=gadgets.io.ContentType.DOM,gadgets.io.makeRequest(e,function(e){e&&e.data?t&&t.success&&"function"==typeof t.success&&t.success(e.data):e&&e.errors&&t&&t.error&&"function"==typeof t.error&&t.error(e.errors)},n)}return{getWeather:e}}();var RiseVision=RiseVision||{};RiseVision.Weather=RiseVision.Weather||{},RiseVision.Weather.Geolocation=function(e){"use strict";function t(i){var r="";navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){r=e.urlByLocation+"&lat="+t.coords.latitude+"&lon="+t.coords.longitude+"&dummy="+Math.ceil(100*Math.random()),RiseVision.Weather.Provider.getWeather(r,{success:function(e){i&&i.success&&"function"==typeof i.success&&i.success(e)},error:function(e){i&&i.error&&"function"==typeof i.error&&i.error(e)}})},function(){setTimeout(function(){t()},n),console.log("Unable to obtain geolocation position.")})}var n=6e4;return{getWeather:t}};var RiseVision=RiseVision||{};RiseVision.Weather=RiseVision.Weather||{},RiseVision.Weather.DisplayAddress=function(e){"use strict";function t(e,t){var n="",r="";Array.isArray(e)&&e.length>0&&"displayAddress"===e[0]&&(Array.isArray(t)&&t.length>0&&(r=JSON.parse(t[0]),n=n+"&name="+encodeURIComponent(r.city+","+r.province)+"&dummy="+Math.ceil(100*Math.random())),RiseVision.Weather.Provider.getWeather(n,{success:function(e){i&&i.success&&"function"==typeof i.success&&i.success(e)},error:function(e){i&&i.error&&"function"==typeof i.error&&i.error(e)}}))}function n(n){var r=(new e.Prefs).getString("id");i=n,r&&""!==r&&(e.rpc.register("rsparam_set_"+r,t),e.rpc.call("","rsparam_get",null,r,"displayAddress"))}var i=null;return{getWeather:n}};var RiseVision=RiseVision||{};RiseVision.Weather=RiseVision.Weather||{},RiseVision.Weather.CustomAddress=function(e){"use strict";function t(t,n){var i="";""!==t&&(i=e.urlByName+"&name="+encodeURIComponent(t)+"&dummy="+Math.ceil(100*Math.random()),RiseVision.Weather.Provider.getWeather(i,{success:function(e){n&&n.success&&"function"==typeof n.success&&n.success(e)},error:function(e){n&&n.error&&"function"==typeof n.error&&n.error(e)}}))}return{getWeather:t}},function(e,t,n,i){"use strict";var r=new i.Prefs,o=r.getString("id");e.oncontextmenu=function(){return!1},t.body.onmousedown=function(){return!1},n.setOnLoadCallback(function(){i.rpc.register("rsparam_set_"+o,RiseVision.Weather.setParams),i.rpc.call("","rsparam_get",null,o,["additionalParams"])})}(window,document,google,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-41395348-5"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiUmlzZVZpc2lvbiIsIkNvbW1vbiIsIlZhbGlkYXRpb24iLCJncmVhdGVyVGhhbiIsImVsZW1lbnQiLCJwYXJhbSIsInZhbHVlIiwidHJpbSIsImRlY2ltYWxSZWdleCIsInRlc3QiLCJwYXJzZUZsb2F0IiwibGVzc1RoYW4iLCJudW1lcmljIiwibnVtZXJpY1JlZ2V4IiwicmVxdWlyZWQiLCJ2YWxpZCIsInR5cGUiLCJjaGVja2VkIiwidXJsIiwiaW5kZXhPZiIsInVybFJlZ0V4cCIsImlzR3JlYXRlclRoYW4iLCJpc0xlc3NUaGFuIiwiaXNWYWxpZFJlcXVpcmVkIiwiaXNWYWxpZFVSTCIsImlzVmFsaWROdW1iZXIiLCJVdGlsaXRpZXMiLCJnZXRGb250Q3NzU3R5bGUiLCJjbGFzc05hbWUiLCJmb250T2JqIiwiZmFtaWx5IiwiZm9udCIsImNvbG9yIiwic2l6ZSIsIndlaWdodCIsImJvbGQiLCJpdGFsaWMiLCJ1bmRlcmxpbmUiLCJoaWdobGlnaHQiLCJoaWdobGlnaHRDb2xvciIsImFkZENTU1J1bGVzIiwicnVsZXMiLCJzdHlsZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImkiLCJsZW5ndGgiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiaGVhZCIsImxvYWRGb250cyIsInNldHRpbmdzIiwiY29udGVudERvYyIsImZvckVhY2giLCJpdGVtIiwiY2xhc3MiLCJmb250U2V0dGluZyIsImxvYWRDdXN0b21Gb250IiwibG9hZEdvb2dsZUZvbnQiLCJzaGVldCIsInJ1bGUiLCJzdHlsZVNoZWV0cyIsImFkZFJ1bGUiLCJzdHlsZXNoZWV0Iiwic2V0QXR0cmlidXRlIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwidXJsQnlOYW1lIiwiZGVjb2RlVVJJIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwidXJsQnlMb2NhdGlvbiIsIldlYXRoZXIiLCJnYWRnZXRzIiwiaTE4biIsImdldFdlYXRoZXIiLCJhZGRyZXNzIiwicGFyYW1zIiwiZ2VvbG9jYXRpb24iLCJkaXNwbGF5IiwiY3VzdG9tIiwiR2VvbG9jYXRpb24iLCJzdWNjZXNzIiwic2hvd1dlYXRoZXIiLCJlcnJvciIsImhhbmRsZUVycm9ycyIsIkRpc3BsYXlBZGRyZXNzIiwiQ3VzdG9tQWRkcmVzcyIsImN1c3RvbUFkZHJlc3MiLCJkYXRhIiwiaWNvbl9uYW1lIiwiY3VycmVudCIsImxvY2F0aW9uIiwicGxhY2UiLCJ3aW5kRGlyZWN0aW9uIiwibXBoIiwia3BoIiwiaGFzQ2l0eSIsImhhc0h1bWlkaXR5IiwiZm9yZWNhc3QiLCJmb3JlY2FzdHMiLCJkYXlPZldlZWsiLCJ0b2RheSIsIkRhdGUiLCJnZXREYXkiLCJ0b21vcnJvdyIsIm5leHREYXkiLCJyZXRyeSIsIiQiLCJzaG93IiwiaGlkZSIsImluaXQiLCJmYWxsYmFja0xuZyIsImVhY2giLCJpbmRleCIsImdldEF0dHJpYnV0ZSIsInRoaXMiLCJsYXlvdXQiLCJsb2FkSW1hZ2UiLCJhdHRyIiwiaHRtbCIsInVuaXQiLCJjb252ZXJ0VGVtcCIsImRlc2NyaXB0aW9uIiwidGV4dCIsImN1c3RvbURlc2NyaXB0aW9uIiwic2hvd0h1bWlkaXR5IiwidCIsImlzTmFOIiwid2luZFNwZWVkIiwicGFyc2VJbnQiLCJNYXRoIiwicm91bmQiLCJ0b0xvd2VyQ2FzZSIsInNldFRpbWVvdXQiLCJyZWZyZXNoSW50ZXJ2YWwiLCJpc0xvYWRpbmciLCJyZWFkeSIsImVycm9ySW50ZXJ2YWwiLCJpY29uIiwiJGVsZW1lbnQiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsIm9uSW1hZ2VMb2FkZWQiLCJvbmVycm9yIiwiY29uc29sZSIsImxvZyIsInNyYyIsImltYWdlc0xvYWRlZCIsInRyaWdnZXIiLCJlcnJvcnMiLCJ0ZW1wIiwicnBjIiwiY2FsbCIsInByZWZzIiwiZ2V0U3RyaW5nIiwic2V0UGFyYW1zIiwibmFtZXMiLCJ2YWx1ZXMiLCJBcnJheSIsImlzQXJyYXkiLCJKU09OIiwicGFyc2UiLCJmb250U2V0dGluZ3MiLCJjdXJyZW50VGVtcEZvbnQiLCJmb3JlY2FzdFRlbXBGb250IiwiZm9yZWNhc3REYXlGb250IiwiYWRkcmVzc0ZvbnQiLCJodW1pZGl0eUZvbnQiLCJ1dGlscyIsImJvZHkiLCJiYWNrZ3JvdW5kIiwidGVybXMiLCJQcmVmcyIsIlByb3ZpZGVyIiwiZ2V0IiwiY2FsbGJhY2tzIiwiaW8iLCJSZXF1ZXN0UGFyYW1ldGVycyIsIkNPTlRFTlRfVFlQRSIsIkNvbnRlbnRUeXBlIiwiRE9NIiwibWFrZVJlcXVlc3QiLCJyZXNwIiwid2VhdGhlclVybCIsIm5hdmlnYXRvciIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJjZWlsIiwicmFuZG9tIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiY2l0eSIsInByb3ZpbmNlIiwiY2IiLCJpZCIsInJlZ2lzdGVyIiwid2luZG93IiwiZ29vZ2xlIiwib25jb250ZXh0bWVudSIsIm9ubW91c2Vkb3duIiwic2V0T25Mb2FkQ2FsbGJhY2siLCJfZ2FxIiwicHVzaCIsImdhIiwiYXN5bmMiLCJwcm90b2NvbCIsInMiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxZQUFhQSxjQWlOakIsSUEvTUFBLFdBQVdDLE9BQVNELFdBQVdDLFdBRS9CRCxXQUFXQyxPQUFPQyxXQUFhLFdBQzdCLFlBU0EsU0FBU0MsR0FBWUMsRUFBU0MsR0FDNUIsR0FBSUMsR0FBUUYsRUFBUUUsTUFBTUMsTUFFMUIsT0FBS0MsR0FBYUMsS0FBS0gsR0FJZkksV0FBV0osR0FBU0ksV0FBV0wsSUFIOUIsRUFNWCxRQUFTTSxHQUFTUCxFQUFTQyxHQUN6QixHQUFJQyxHQUFRRixFQUFRRSxNQUFNQyxNQUUxQixPQUFLQyxHQUFhQyxLQUFLSCxHQUlmSSxXQUFXSixHQUFTSSxXQUFXTCxJQUg5QixFQU1YLFFBQVNPLEdB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SSxFQUFRZ0YsSUFBSThDLFNBQVMsZUFBaUJELEVBQUl2TSxXQUFXeUUsUUFBUXFGLFdBQzdEcEYsRUFBUWdGLElBQUlDLEtBQUssR0FBSSxjQUFlLEtBQU00QyxHQUFLLHdCQUVoREUsT0FBUTlKLFNBQVUrSixPQUFRaEksUUFHN0IsSUFBSW9JLE1BQU9BLFFBRVhBLE1BQUtDLE1BQU0sY0FBZSxrQkFDMUJELEtBQUtDLE1BQU0sbUJBRVgsV0FDRSxHQUFJQyxHQUFLckssU0FBU0MsY0FBYyxTQUNoQ29LLEdBQUdoTSxLQUFPLGtCQUNWZ00sRUFBR0MsT0FBUSxFQUNYRCxFQUFHM0QsS0FBTyxVQUFZMUcsU0FBU2tELFNBQVNxSCxTQUFXLGNBQWdCLGNBQWdCLDZCQUNuRixJQUFJQyxHQUFJeEssU0FBU3NCLHFCQUFxQixVQUFVLEVBQ2hEa0osR0FBRUMsV0FBV0MsYUFBYUwsRUFBSUciLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24gPSBSaXNlVmlzaW9uLkNvbW1vbiB8fCB7fTtcblxuUmlzZVZpc2lvbi5Db21tb24uVmFsaWRhdGlvbiA9IChmdW5jdGlvbigpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgRGVmaW5pbmcgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMgYmVpbmcgdXNlZFxuICAgKi9cbiAgdmFyIHVybFJlZ0V4cCA9IC9eKD86KD86aHR0cHM/fGZ0cCk6XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hKD86MTB8MTI3KSg/OlxcLlxcZHsxLDN9KXszfSkoPyEoPzoxNjlcXC4yNTR8MTkyXFwuMTY4KSg/OlxcLlxcZHsxLDN9KXsyfSkoPyExNzJcXC4oPzoxWzYtOV18MlxcZHwzWzAtMV0pKD86XFwuXFxkezEsM30pezJ9KSg/OlsxLTldXFxkP3wxXFxkXFxkfDJbMDFdXFxkfDIyWzAtM10pKD86XFwuKD86MT9cXGR7MSwyfXwyWzAtNF1cXGR8MjVbMC01XSkpezJ9KD86XFwuKD86WzEtOV1cXGQ/fDFcXGRcXGR8MlswLTRdXFxkfDI1WzAtNF0pKXwoPzooPzpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSstPykqW2EtelxcdTAwYTEtXFx1ZmZmZjAtOV0rKSg/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmYwLTldKy0/KSpbYS16XFx1MDBhMS1cXHVmZmZmMC05XSspKig/OlxcLig/OlthLXpcXHUwMGExLVxcdWZmZmZdezIsfSkpKSg/OjpcXGR7Miw1fSk/KD86XFwvW15cXHNdKik/JC9pLFxuICAgICAgbnVtZXJpY1JlZ2V4ID0gL14oXFwtfFxcKyk/KFswLTldK3xJbmZpbml0eSkkLyxcbiAgICAgIGRlY2ltYWxSZWdleCA9IC9eXFwtP1swLTldKlxcLj9bMC05XSskLztcblxuICBmdW5jdGlvbiBncmVhdGVyVGhhbihlbGVtZW50LCBwYXJhbSkge1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuXG4gICAgaWYgKCFkZWNpbWFsUmVnZXgudGVzdCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gKHBhcnNlRmxvYXQodmFsdWUpID4gcGFyc2VGbG9hdChwYXJhbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGVzc1RoYW4oZWxlbWVudCwgcGFyYW0pIHtcbiAgICB2YXIgdmFsdWUgPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcblxuICAgIGlmICghZGVjaW1hbFJlZ2V4LnRlc3QodmFsdWUpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIChwYXJzZUZsb2F0KHZhbHVlKSA8IHBhcnNlRmxvYXQocGFyYW0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG51bWVyaWMoZWxlbWVudCl7XG4gICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZS50cmltKCk7XG5cbiAgICAvKlxuICAgICBSZWdleHAgYmVpbmcgdXNlZCBpcyBzdHJpY3RlciB0aGFuIHBhcnNlSW50LiBVc2luZyByZWd1bGFyIGV4cHJlc3Npb24gYXNcbiAgICAgbWVudGlvbmVkIG9uIG1vemlsbGFcbiAgICAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvXG4gICAgIEdsb2JhbF9PYmplY3RzL3BhcnNlSW50XG4gICAgICovXG4gICAgcmV0dXJuIG51bWVyaWNSZWdleC50ZXN0KHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlcXVpcmVkKGVsZW1lbnQpe1xuICAgIHZhciB2YWx1ZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpLFxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xuXG4gICAgaWYgKGVsZW1lbnQudHlwZSA9PT0gXCJjaGVja2JveFwiIHx8IGVsZW1lbnQudHlwZSA9PT0gXCJyYWRpb1wiKSB7XG4gICAgICBpZihlbGVtZW50LmNoZWNrZWQgPT09IHRydWUpIHtcbiAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09ICcnKSB7XG4gICAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH1cblxuICBmdW5jdGlvbiB1cmwoZWxlbWVudCl7XG4gICAgdmFyIHZhbHVlID0gZWxlbWVudC52YWx1ZS50cmltKCk7XG5cbiAgICAvLyBBZGQgaHR0cDovLyBpZiBubyBwcm90b2NvbCBwYXJhbWV0ZXIgZXhpc3RzXG4gICAgaWYgKHZhbHVlLmluZGV4T2YoXCI6Ly9cIikgPT09IC0xKSB7XG4gICAgICB2YWx1ZSA9IFwiaHR0cDovL1wiICsgdmFsdWU7XG4gICAgfVxuICAgIC8qXG4gICAgIERpc2N1c3Npb25cbiAgICAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zNzY4NC9ob3ctdG8tcmVwbGFjZS1wbGFpbi11cmxzLVxuICAgICB3aXRoLWxpbmtzIzIxOTI1NDkxXG5cbiAgICAgVXNpbmdcbiAgICAgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZHBlcmluaS83MjkyOTRcbiAgICAgUmVhc29uaW5nXG4gICAgIGh0dHA6Ly9tYXRoaWFzYnluZW5zLmJlL2RlbW8vdXJsLXJlZ2V4XG5cbiAgICAgKi9cbiAgICByZXR1cm4gdXJsUmVnRXhwLnRlc3QodmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBpc0dyZWF0ZXJUaGFuOiBncmVhdGVyVGhhbixcbiAgICBpc0xlc3NUaGFuOiBsZXNzVGhhbixcbiAgICBpc1ZhbGlkUmVxdWlyZWQ6IHJlcXVpcmVkLFxuICAgIGlzVmFsaWRVUkw6IHVybCxcbiAgICBpc1ZhbGlkTnVtYmVyOiBudW1lcmljXG4gIH07XG59KSgpO1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5VdGlsaXRpZXMgPSAoZnVuY3Rpb24oKSB7XG5cbiAgZnVuY3Rpb24gZ2V0Rm9udENzc1N0eWxlKGNsYXNzTmFtZSwgZm9udE9iaikge1xuICAgIHZhciBmYW1pbHkgPSBcImZvbnQtZmFtaWx5OlwiICsgZm9udE9iai5mb250LmZhbWlseSArIFwiOyBcIjtcbiAgICB2YXIgY29sb3IgPSBcImNvbG9yOiBcIiArIGZvbnRPYmouY29sb3IgKyBcIjsgXCI7XG4gICAgdmFyIHNpemUgPSBcImZvbnQtc2l6ZTogXCIgKyBmb250T2JqLnNpemUgKyBcInB4OyBcIjtcbiAgICB2YXIgd2VpZ2h0ID0gXCJmb250LXdlaWdodDogXCIgKyAoZm9udE9iai5ib2xkID8gXCJib2xkXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgaXRhbGljID0gXCJmb250LXN0eWxlOiBcIiArIChmb250T2JqLml0YWxpYyA/IFwiaXRhbGljXCIgOiBcIm5vcm1hbFwiKSArIFwiOyBcIjtcbiAgICB2YXIgdW5kZXJsaW5lID0gXCJ0ZXh0LWRlY29yYXRpb246IFwiICsgKGZvbnRPYmoudW5kZXJsaW5lID8gXCJ1bmRlcmxpbmVcIiA6IFwibm9uZVwiKSArIFwiOyBcIjtcbiAgICB2YXIgaGlnaGxpZ2h0ID0gXCJiYWNrZ3JvdW5kLWNvbG9yOiBcIiArIGZvbnRPYmouaGlnaGxpZ2h0Q29sb3IgKyBcIjsgXCI7XG5cbiAgICByZXR1cm4gXCIuXCIgKyBjbGFzc05hbWUgKyBcIiB7XCIgKyBmYW1pbHkgKyBjb2xvciArIHNpemUgKyB3ZWlnaHQgKyBpdGFsaWMgKyB1bmRlcmxpbmUgKyBoaWdobGlnaHQgKyBcIn1cIjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENTU1J1bGVzKHJ1bGVzKSB7XG4gICAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHJ1bGVzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShydWxlc1tpXSkpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgLypcbiAgICogTG9hZHMgR29vZ2xlIG9yIGN1c3RvbSBmb250cywgaWYgYXBwbGljYWJsZSwgYW5kIGluamVjdHMgQ1NTIHN0eWxlc1xuICAgKiBpbnRvIHRoZSBoZWFkIG9mIHRoZSBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtICAgIGFycmF5ICAgIHNldHRpbmdzICAgIEFycmF5IG9mIG9iamVjdHMgd2l0aCB0aGUgZm9sbG93aW5nIGZvcm06XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3tcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJkYXRlXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImZvbnRTZXR0aW5nXCI6IHtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib2xkOiB0cnVlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcImJsYWNrXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiBcIkFrcm9uaW1cIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQ6IFwiQWtyb25pbVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJWZXJkYW5hXCIsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImdvb2dsZVwiLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBcImh0dHA6Ly9jdXN0b20tZm9udC11cmxcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlnaGxpZ2h0Q29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGFsaWM6IGZhbHNlLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IFwiMjBcIixcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1bmRlcmxpbmU6IGZhbHNlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICpcbiAgICogICAgICAgICAgIG9iamVjdCAgIGNvbnRlbnREb2MgICAgRG9jdW1lbnQgb2JqZWN0IGludG8gd2hpY2ggdG8gaW5qZWN0IHN0eWxlc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmQgbG9hZCBmb250cyAob3B0aW9uYWwpLlxuICAgKi9cbiAgZnVuY3Rpb24gbG9hZEZvbnRzKHNldHRpbmdzLCBjb250ZW50RG9jKSB7XG4gICAgc2V0dGluZ3MuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICBpZiAoaXRlbS5jbGFzcyAmJiBpdGVtLmZvbnRTZXR0aW5nKSB7XG4gICAgICAgIGFkZENTU1J1bGVzKFsgZ2V0Rm9udENzc1N0eWxlKGl0ZW0uY2xhc3MsIGl0ZW0uZm9udFNldHRpbmcpIF0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXRlbS5mb250U2V0dGluZy5mb250LnR5cGUpIHtcbiAgICAgICAgaWYgKGl0ZW0uZm9udFNldHRpbmcuZm9udC50eXBlID09PSBcImN1c3RvbVwiICYmIGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHkgJiZcbiAgICAgICAgICBpdGVtLmZvbnRTZXR0aW5nLmZvbnQudXJsKSB7XG4gICAgICAgICAgbG9hZEN1c3RvbUZvbnQoaXRlbS5mb250U2V0dGluZy5mb250LmZhbWlseSwgaXRlbS5mb250U2V0dGluZy5mb250LnVybCxcbiAgICAgICAgICAgIGNvbnRlbnREb2MpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGl0ZW0uZm9udFNldHRpbmcuZm9udC50eXBlID09PSBcImdvb2dsZVwiICYmIGl0ZW0uZm9udFNldHRpbmcuZm9udC5mYW1pbHkpIHtcbiAgICAgICAgICBsb2FkR29vZ2xlRm9udChpdGVtLmZvbnRTZXR0aW5nLmZvbnQuZmFtaWx5LCBjb250ZW50RG9jKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEN1c3RvbUZvbnQoZmFtaWx5LCB1cmwsIGNvbnRlbnREb2MpIHtcbiAgICB2YXIgc2hlZXQgPSBudWxsO1xuICAgIHZhciBydWxlID0gXCJmb250LWZhbWlseTogXCIgKyBmYW1pbHkgKyBcIjsgXCIgKyBcInNyYzogdXJsKCdcIiArIHVybCArIFwiJyk7XCI7XG5cbiAgICBjb250ZW50RG9jID0gY29udGVudERvYyB8fCBkb2N1bWVudDtcblxuICAgIHNoZWV0ID0gY29udGVudERvYy5zdHlsZVNoZWV0c1swXTtcblxuICAgIGlmIChzaGVldCAhPT0gbnVsbCkge1xuICAgICAgc2hlZXQuYWRkUnVsZShcIkBmb250LWZhY2VcIiwgcnVsZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9hZEdvb2dsZUZvbnQoZmFtaWx5LCBjb250ZW50RG9jKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcblxuICAgIGNvbnRlbnREb2MgPSBjb250ZW50RG9jIHx8IGRvY3VtZW50O1xuXG4gICAgc3R5bGVzaGVldC5zZXRBdHRyaWJ1dGUoXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIpO1xuICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvY3NzXCIpO1xuICAgIHN0eWxlc2hlZXQuc2V0QXR0cmlidXRlKFwiaHJlZlwiLCBcImh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzP2ZhbWlseT1cIiArXG4gICAgICBmYW1pbHkpO1xuXG4gICAgaWYgKHN0eWxlc2hlZXQgIT09IG51bGwpIHtcbiAgICAgIGNvbnRlbnREb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKHN0eWxlc2hlZXQpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgZ2V0Rm9udENzc1N0eWxlOiAgZ2V0Rm9udENzc1N0eWxlLFxuICAgIGFkZENTU1J1bGVzOiAgICAgIGFkZENTU1J1bGVzLFxuICAgIGxvYWRGb250czogICAgICAgIGxvYWRGb250cyxcbiAgICBsb2FkQ3VzdG9tRm9udDogICBsb2FkQ3VzdG9tRm9udCxcbiAgICBsb2FkR29vZ2xlRm9udDogICBsb2FkR29vZ2xlRm9udFxuICB9O1xufSkoKTtcblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xuaWYgKHR5cGVvZiBhbmd1bGFyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQud2VhdGhlci5jb25maWdcIiwgW10pXG4gICAgLnZhbHVlKFwiY3VycmVudFwiLCBcImh0dHBzOi8vczMuYW1hem9uYXdzLmNvbS93aWRnZXQtd2VhdGhlci10ZXN0LzAuMS4wL2Rpc3QvY3VycmVudC5odG1sXCIpXG4gICAgLnZhbHVlKFwidGhyZWVEYXlcIiwgXCJodHRwczovL3MzLmFtYXpvbmF3cy5jb20vd2lkZ2V0LXdlYXRoZXItdGVzdC8wLjEuMC9kaXN0L3RocmVlLWRheS5odG1sXCIpXG4gICAgLnZhbHVlKFwiY3VycmVudEFuZFRocmVlRGF5XCIsIFwiaHR0cHM6Ly9zMy5hbWF6b25hd3MuY29tL3dpZGdldC13ZWF0aGVyLXRlc3QvMC4xLjAvZGlzdC9jdXJyZW50LWFuZC10aHJlZS1kYXkuaHRtbFwiKVxuICA7XG59XG5cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgdXJsQnlOYW1lOiBkZWNvZGVVUkkoZGVjb2RlVVJJQ29tcG9uZW50KFwiJTY4JTc0JTc0JTcwJTNhJTJmJTJmJTc3JTc3JTc3JTJlJTc0JTY5JTZlJTYyJTc1JTc3JTY1JTYxJTc0JTY4JTY1JTcyJTJlJTYzJTZmJTZkJTJmJTc3JTc4JTVmJTY2JTY1JTY1JTY0JTJmJTc3JTc4JTVmJTYzJTc1JTcyJTcyJTY1JTZlJTc0JTVmJTY1JTc4JTc0JTY1JTZlJTY0JTY1JTY0JTVmJTYyJTc5JTVmJTZlJTYxJTZkJTY1JTJlJTcwJTY4JTcwJTNmJTcwJTYxJTczJTczJTYzJTZmJTY0JTY1JTNkJTcyJTY5JTczJTY1JTY0JTY5JTczJTcwJTZjJTYxJTc5JTI1JTM3JTQzJTY0JTZiJTYxJTYzJTI2JTZkJTY1JTc0JTcyJTY5JTYzJTNkJTY2JTYxJTZjJTczJTY1XCIpKSxcbiAgICB1cmxCeUxvY2F0aW9uOiBkZWNvZGVVUkkoZGVjb2RlVVJJQ29tcG9uZW50KFwiJTY4JTc0JTc0JTcwJTNhJTJmJTJmJTc3JTc3JTc3JTJlJTc0JTY5JTZlJTYyJTc1JTc3JTY1JTYxJTc0JTY4JTY1JTcyJTJlJTYzJTZmJTZkJTJmJTc3JTc4JTVmJTY2JTY1JTY1JTY0JTJmJTc3JTc4JTVmJTYzJTc1JTcyJTcyJTY1JTZlJTc0JTVmJTY1JTc4JTc0JTY1JTZlJTY0JTY1JTY0JTVmJTYyJTc5JTVmJTZjJTYxJTc0JTZjJTZmJTZlJTJlJTcwJTY4JTcwJTNmJTcwJTYxJTczJTczJTYzJTZmJTY0JTY1JTNkJTcyJTY5JTczJTY1JTY0JTY5JTczJTcwJTZjJTYxJTc5JTI1JTM3JTQzJTY0JTZiJTYxJTYzJTI2JTZkJTY1JTc0JTcyJTY5JTYzJTNkJTY2JTYxJTZjJTczJTY1XCIpKVxuICB9O1xufVxuLyoganNoaW50IGlnbm9yZTplbmQgKi9cblxuLyogZ2xvYmFsIGdhZGdldHMsIGNvbmZpZywgaTE4biAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLldlYXRoZXIgPSBSaXNlVmlzaW9uLldlYXRoZXIgfHwge307XG5cblJpc2VWaXNpb24uV2VhdGhlciA9IChmdW5jdGlvbiAoZ2FkZ2V0cywgY29uZmlnLCBpMThuKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBwYXJhbXMsXG4gICAgaXNMb2FkaW5nID0gdHJ1ZSxcbiAgICBpbWFnZXNMb2FkZWQgPSAwLFxuICAgIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICB1dGlscyA9IFJpc2VWaXNpb24uQ29tbW9uLlV0aWxpdGllcyxcbiAgICByZWZyZXNoSW50ZXJ2YWwgPSAxODAwMDAwLFxuICAgIGVycm9ySW50ZXJ2YWwgPSA2MDAwMDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXRXZWF0aGVyKCkge1xuICAgIHZhciBhZGRyZXNzID0gcGFyYW1zLmFkZHJlc3MsXG4gICAgICBnZW9sb2NhdGlvbiA9IG51bGwsXG4gICAgICBkaXNwbGF5ID0gbnVsbCxcbiAgICAgIGN1c3RvbSA9IG51bGw7XG5cbiAgICBpZiAoYWRkcmVzcyA9PT0gXCJnZW9sb2NhdGlvblwiKSB7XG4gICAgICBnZW9sb2NhdGlvbiA9IG5ldyBSaXNlVmlzaW9uLldlYXRoZXIuR2VvbG9jYXRpb24oY29uZmlnKTtcblxuICAgICAgZ2VvbG9jYXRpb24uZ2V0V2VhdGhlcih7XG4gICAgICAgIFwic3VjY2Vzc1wiOiBzaG93V2VhdGhlcixcbiAgICAgICAgXCJlcnJvclwiOiBoYW5kbGVFcnJvcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChhZGRyZXNzID09PSBcImRpc3BsYXlcIikge1xuICAgICAgZGlzcGxheSA9IG5ldyBSaXNlVmlzaW9uLldlYXRoZXIuRGlzcGxheUFkZHJlc3MoZ2FkZ2V0cyk7XG5cbiAgICAgIGRpc3BsYXkuZ2V0V2VhdGhlcih7XG4gICAgICAgIFwic3VjY2Vzc1wiOiBzaG93V2VhdGhlcixcbiAgICAgICAgXCJlcnJvclwiOiBoYW5kbGVFcnJvcnNcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChhZGRyZXNzID09PSBcImN1c3RvbVwiKSB7XG4gICAgICBjdXN0b20gPSBuZXcgUmlzZVZpc2lvbi5XZWF0aGVyLkN1c3RvbUFkZHJlc3MoY29uZmlnKTtcblxuICAgICAgY3VzdG9tLmdldFdlYXRoZXIocGFyYW1zLmN1c3RvbUFkZHJlc3MsIHtcbiAgICAgICAgXCJzdWNjZXNzXCI6IHNob3dXZWF0aGVyLFxuICAgICAgICBcImVycm9yXCI6IGhhbmRsZUVycm9yc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1dlYXRoZXIoZGF0YSkge1xuICAgIHZhciBpY29uX25hbWUgPSBcIlwiLFxuICAgICAgY3VycmVudCA9IG51bGwsXG4gICAgICBsb2NhdGlvbiA9IG51bGwsXG4gICAgICBwbGFjZSA9IFwiXCIsXG4gICAgICB3aW5kRGlyZWN0aW9uID0gXCJcIixcbiAgICAgIG1waCA9IDAsXG4gICAgICBrcGggPSAwLFxuICAgICAgaGFzQ2l0eSA9IGZhbHNlLFxuICAgICAgaGFzSHVtaWRpdHkgPSBmYWxzZSxcbiAgICAgIGZvcmVjYXN0ID0gbnVsbCxcbiAgICAgIGZvcmVjYXN0cyA9IFtdLFxuICAgICAgZGF5T2ZXZWVrID0gXCJcIixcbiAgICAgIHRvZGF5ID0gbmV3IERhdGUoKS5nZXREYXkoKSArIDEsXG4gICAgICB0b21vcnJvdyA9ICh0b2RheSArIDEpID4gNyA/IDEgOiB0b2RheSArIDEsXG4gICAgICBuZXh0RGF5ID0gKHRvbW9ycm93ICsgMSA+IDcpID8gMSA6IHRvbW9ycm93ICsgMTtcblxuICAgIGlmIChkYXRhKSB7XG4gICAgICAvLyBObyB3ZWF0aGVyIGRhdGEgZm91bmQgZm9yIHRoaXMgbG9jYXRpb24uXG4gICAgICBpZiAoZGF0YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImN3X2Vycm9yXCIpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0cnkoKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAkKFwiLmNvbnRhaW5lclwiKS5zaG93KCk7XG4gICAgICAgICQoXCIuZXJyb3JcIikuaGlkZSgpO1xuXG4gICAgICAgIGkxOG4uaW5pdCh7IGZhbGxiYWNrTG5nOiBcImVuXCIgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJChcIi5jb250YWluZXJcIikuaTE4bigpO1xuXG4gICAgICAgICAgLy8gRmluZCB0aGUgb2JzZXJ2YXRpb24gdGFnIHRoYXQgaGFzIGFuIGljb25fbmFtZSBvdGhlciB0aGFuICdjd19ub19yZXBvcnRfaWNvbidcbiAgICAgICAgICAvLyBhbmQgdXNlIHRoYXQgb25lIGZvciBjdXJyZW50IHdlYXRoZXIgZGF0YS5cbiAgICAgICAgICAkLmVhY2goZGF0YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIm9ic2VydmF0aW9uXCIpLCBmdW5jdGlvbihpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIFNraXAgZmlyc3Qgb2JzZXJ2YXRpb24gZGF0YSBhcyBpdCBkb2Vzbid0IHNlZW0gdG8gYmUgdmVyeSByZWxpYWJsZS5cbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICBpY29uX25hbWUgPSB2YWx1ZS5nZXRBdHRyaWJ1dGUoXCJpY29uX25hbWVcIik7XG5cbiAgICAgICAgICAgICAgaWYgKChpY29uX25hbWUgIT09IG51bGwpICYmIChpY29uX25hbWUgIT09IFwiY3dfbm9fcmVwb3J0X2ljb25cIikpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIE5vIG9ic2VydmF0aW9uIGRhdGEgZm91bmQgdGhhdCBoYXMgYW4gaWNvbi5cbiAgICAgICAgICBpZiAoY3VycmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVXNlIG9ic2VydmF0aW9uIGRhdGEgZnJvbSBzZWNvbmQgbGlzdGluZyBhcyBpdCBzZWVtcyB0byBiZSBtb3JlIHJlbGlhYmxlLlxuICAgICAgICAgICAgaWYgKGRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJvYnNlcnZhdGlvblwiKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBkYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwib2JzZXJ2YXRpb25cIilbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVc2UgdGhlIGZpcnN0IG9ic2VydmF0aW9uIGlmIHRoZXJlIGlzIG9ubHkgb25lLlxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGN1cnJlbnQgPSBkYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwib2JzZXJ2YXRpb25cIilbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ3VycmVudCB3ZWF0aGVyXG4gICAgICAgICAgaWYgKGN1cnJlbnQgJiYgKHBhcmFtcy5sYXlvdXQgIT09IFwidGhyZWUtZGF5XCIpKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJpY29uX25hbWVcIikpIHtcbiAgICAgICAgICAgICAgbG9hZEltYWdlKGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwiaWNvbl9uYW1lXCIpLCAkKFwiLmN1cnJlbnQtaWNvblwiKSk7XG4gICAgICAgICAgICAgICQoXCIuY3VycmVudC1pY29uXCIpLmF0dHIoXCJ0aXRsZVwiLCBjdXJyZW50LmdldEF0dHJpYnV0ZShcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAkKFwiLmN1cnJlbnQtaWNvblwiKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFRlbXBlcmF0dXJlXG4gICAgICAgICAgICAkKFwiLmN1cnJlbnQtdGVtcFwiKS5odG1sKChwYXJhbXMudW5pdCA9PT0gXCJjZWxzaXVzXCIpID9cbiAgICAgICAgICAgICAgY29udmVydFRlbXAoY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ0ZW1wZXJhdHVyZVwiKSkgKyBcIiYjMTc2O0NcIiA6XG4gICAgICAgICAgICAgIGNvbnZlcnRUZW1wKGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwidGVtcGVyYXR1cmVcIikpICsgXCImIzE3NjtGXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIERlc2NyaXB0aW9uXG4gICAgICAgICAgaWYgKHBhcmFtcy5kZXNjcmlwdGlvbiA9PT0gXCJjdXN0b21cIikge1xuICAgICAgICAgICAgJChcIi5jaXR5XCIpLnRleHQocGFyYW1zLmN1c3RvbURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGhhc0NpdHkgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChwYXJhbXMuZGVzY3JpcHRpb24gPT09IFwic2VydmljZVwiKSB7XG4gICAgICAgICAgICBsb2NhdGlvbiA9IGRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJsb2NhdGlvblwiKVswXTtcblxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgIHBsYWNlID0gbG9jYXRpb24uZ2V0QXR0cmlidXRlKFwiY2l0eV9uYW1lXCIpO1xuXG4gICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5nZXRBdHRyaWJ1dGUoXCJzdGF0ZV9uYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgcGxhY2UgKz0gXCIsIFwiICsgbG9jYXRpb24uZ2V0QXR0cmlidXRlKFwic3RhdGVfbmFtZVwiKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICQoXCIuY2l0eVwiKS50ZXh0KHBsYWNlKTtcbiAgICAgICAgICAgICAgaGFzQ2l0eSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2luZCBhbmQgaHVtaWRpdHlcbiAgICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgICAgaWYgKHBhcmFtcy5zaG93SHVtaWRpdHkpIHtcbiAgICAgICAgICAgICAgd2luZERpcmVjdGlvbiA9IGkxOG4udChjdXJyZW50LmdldEF0dHJpYnV0ZShcIndpbmRfc2hvcnRcIikpO1xuXG4gICAgICAgICAgICAgIGlmICghaXNOYU4oY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJodW1pZGl0eVwiKSkpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmh1bWlkaXR5XCIpLnRleHQoaTE4bi50KFwiaHVtaWRpdHlcIikgKyBcIiBcIiArIGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwiaHVtaWRpdHlcIikgKyBcIiVcIik7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAocGFyYW1zLndpbmRTcGVlZCA9PT0gXCJtcGhcIikge1xuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50LmdldEF0dHJpYnV0ZShcIndpbmRfc2hvcnRcIikgJiYgY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ3aW5kX3NwZWVkXCIpKSB7XG4gICAgICAgICAgICAgICAgICAkKFwiLndpbmRcIikudGV4dChpMThuLnQoXCJ3aW5kXCIpICsgXCIgXCIgKyB3aW5kRGlyZWN0aW9uICsgXCIgXCIgKyBpMThuLnQoXCJhdFwiKSArIFwiIFwiICtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VJbnQoY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ3aW5kX3NwZWVkXCIpKSArIFwiIFwiICsgaTE4bi50KFwibXBoXCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHBhcmFtcy53aW5kU3BlZWQgPT09IFwia3BoXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ3aW5kX3Nob3J0XCIpICYmIGN1cnJlbnQuZ2V0QXR0cmlidXRlKFwid2luZF9zcGVlZFwiKSkge1xuICAgICAgICAgICAgICAgICAgbXBoID0gcGFyc2VJbnQoY3VycmVudC5nZXRBdHRyaWJ1dGUoXCJ3aW5kX3NwZWVkXCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgICBrcGggPSBNYXRoLnJvdW5kKG1waCAqIDEuNjA5MzQ0KTtcblxuICAgICAgICAgICAgICAgICAgJChcIi53aW5kXCIpLnRleHQoaTE4bi50KFwid2luZFwiKSArIFwiIFwiICsgd2luZERpcmVjdGlvbiArIFwiIFwiICsgaTE4bi50KFwiYXRcIikgK1xuICAgICAgICAgICAgICAgICAgICBcIiBcIiArIGtwaCArIFwiIFwiICsgaTE4bi50KFwia3BoXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBoYXNIdW1pZGl0eSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgJChcIi5odW1pZGl0eS13aW5kXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWhhc0NpdHkgJiYgIWhhc0h1bWlkaXR5KSB7XG4gICAgICAgICAgICAkKFwiLmluZm9cIikuaGlkZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvcmVjYXN0ID0gZGF0YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImZvcmVjYXN0XCIpO1xuXG4gICAgICAgICAgLy8gRm9yZWNhc3RlZCB3ZWF0aGVyXG4gICAgICAgICAgaWYgKGZvcmVjYXN0KSB7XG4gICAgICAgICAgICBpZiAocGFyYW1zLmxheW91dCAhPT0gXCJjdXJyZW50XCIpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmb3JlY2FzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGRheU9mV2VlayA9IHBhcnNlSW50KGZvcmVjYXN0W2ldLmdldEF0dHJpYnV0ZShcImRheV9vZl93ZWVrXCIpLCAxMCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoKGRheU9mV2VlayA9PT0gdG9kYXkpKSB7XG4gICAgICAgICAgICAgICAgICBmb3JlY2FzdHNbMF0gPSBmb3JlY2FzdFtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF5T2ZXZWVrID09PSB0b21vcnJvdykge1xuICAgICAgICAgICAgICAgICAgZm9yZWNhc3RzWzFdID0gZm9yZWNhc3RbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGRheU9mV2VlayA9PT0gbmV4dERheSkge1xuICAgICAgICAgICAgICAgICAgZm9yZWNhc3RzWzJdID0gZm9yZWNhc3RbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEltYWdlc1xuICAgICAgICAgICAgJChcIi5pY29uXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgICAgICAgICAgaWYgKGZvcmVjYXN0c1tpbmRleF0uZ2V0QXR0cmlidXRlKFwiaWNvbl9uYW1lXCIpKSB7XG4gICAgICAgICAgICAgICAgbG9hZEltYWdlKGZvcmVjYXN0c1tpbmRleF0uZ2V0QXR0cmlidXRlKFwiaWNvbl9uYW1lXCIpLCAkKHRoaXMpKTtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoXCJ0aXRsZVwiLCBmb3JlY2FzdHNbaW5kZXhdLmdldEF0dHJpYnV0ZShcImRlc2NyaXB0aW9uXCIpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFdlZWtkYXlcbiAgICAgICAgICAgICQoXCIuZGF5LW9mLXdlZWtcIikuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLmh0bWwoaTE4bi50KGZvcmVjYXN0c1tpbmRleF0uZ2V0QXR0cmlidXRlKFwid2Vla2RheVwiKS50b0xvd2VyQ2FzZSgpKSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gVGVtcGVyYXR1cmVcbiAgICAgICAgICAgICQoXCIudGVtcFwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XG4gICAgICAgICAgICAgICQodGhpcykuaHRtbChjb252ZXJ0VGVtcChmb3JlY2FzdHNbaW5kZXhdLmdldEF0dHJpYnV0ZShcImhpZ2hfdGVtcFwiKSkgKyBcIiYjMTc2OyAvIFwiICtcbiAgICAgICAgICAgICAgICBjb252ZXJ0VGVtcChmb3JlY2FzdHNbaW5kZXhdLmdldEF0dHJpYnV0ZShcImxvd190ZW1wXCIpKSArIFwiJiMxNzY7XCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGdldFdlYXRoZXIoKTtcbiAgICAgICAgICB9LCByZWZyZXNoSW50ZXJ2YWwpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgIHJldHJ5KCk7XG4gICAgfVxuXG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICByZWFkeSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJldHJ5KCkge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICQoXCIuY29udGFpbmVyXCIpLmhpZGUoKTtcbiAgICAgICQoXCIuZXJyb3JcIikudGV4dChcIlVuYWJsZSB0byByZXRyaWV2ZSB3ZWF0aGVyIGRhdGEgZm9yIHRoYXQgbG9jYXRpb24uXCIpLnNob3coKTsgLy8gVE9ETzogVHJhbnNsYXRlIHRoaXMuXG4gICAgfVxuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGdldFdlYXRoZXIoKTtcbiAgICB9LCBlcnJvckludGVydmFsKTtcbiAgfVxuXG4gIC8qIExvYWQgYSB3ZWF0aGVyIGltYWdlLiAqL1xuICBmdW5jdGlvbiBsb2FkSW1hZ2UoaWNvbiwgJGVsZW1lbnQpIHtcbiAgICB2YXIgaW1nID0gbmV3IEltYWdlKCksXG4gICAgICB1cmwgPSBcImltZy9cIiArIGljb24gKyBcIi5wbmdcIjtcblxuICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICRlbGVtZW50LmF0dHIoXCJzcmNcIiwgdXJsKTtcbiAgICAgIG9uSW1hZ2VMb2FkZWQoKTtcbiAgICB9O1xuXG4gICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSW1hZ2UgXCIgKyBpY29uICsgXCIgbm90IGZvdW5kIG9uIFwiICsgbmV3IERhdGUoKSArIFwiIGZvciBcIiArICQoXCIuY2l0eVwiKS50ZXh0KCkpO1xuICAgICAgb25JbWFnZUxvYWRlZCgpO1xuICAgIH07XG5cbiAgICBpbWcuc3JjID0gdXJsO1xuICB9XG5cbiAgLyogRXZlbnQgaGFuZGxlciBmb3Igd2hlbiBhIHdlYXRoZXIgaW1hZ2UgaGFzIGJlZW4gbG9hZGVkLiAqL1xuICBmdW5jdGlvbiBvbkltYWdlTG9hZGVkKCkge1xuICAgIGltYWdlc0xvYWRlZCsrO1xuXG4gICAgaWYgKHBhcmFtcy5sYXlvdXQgPT09IFwiY3VycmVudFwiKSB7XG4gICAgICBpZiAoaW1hZ2VzTG9hZGVkID09PSAxKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJkYXRhUG9wdWxhdGVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChwYXJhbXMubGF5b3V0ID09PSBcInRocmVlLWRheVwiKSB7XG4gICAgICBpZiAoaW1hZ2VzTG9hZGVkID09PSAzKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJkYXRhUG9wdWxhdGVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChwYXJhbXMubGF5b3V0ID09PSBcImN1cnJlbnQtYW5kLXRocmVlLWRheVwiKSB7XG4gICAgICBpZiAoaW1hZ2VzTG9hZGVkID09PSA0KSB7XG4gICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJkYXRhUG9wdWxhdGVkXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICAvKiBXaGVuIHVzaW5nIGEgY3VzdG9tIGxheW91dCwgdGhlIG51bWJlciBvZiBpbWFnZXMgaXMgdW5rbm93bi5cbiAgICAgICBUaGUgYGRhdGFQb3B1bGF0ZWRgIGV2ZW50IHdpbGwgZmlyZSBvbmNlIHBlciBpbWFnZS4gKi9cbiAgICBlbHNlIHtcbiAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoXCJkYXRhUG9wdWxhdGVkXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8qIFVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSB3ZWF0aGVyIHNlcnZpY2UuICovXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9ycyhlcnJvcnMpIHtcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIHdlYXRoZXIgc2VydmljZSBhdCBcIiArIG5ldyBEYXRlKCkgK1xuICAgICAgICBcIi4gUGxlYXNlIGNoZWNrIHlvdXIgSW50ZXJuZXQgY29ubmVjdGlvbi5cIik7XG5cbiAgICAgIC8vIEtlZXAgdHJ5aW5nIHRvIGNvbm5lY3QgYXQgYSByZWd1bGFyIGludGVydmFsLlxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgZ2V0V2VhdGhlcigpO1xuICAgICAgfSwgZXJyb3JJbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgLyogQ29udmVydCB0ZW1wZXJhdHVyZSB0byBjb3JyZWN0IHVuaXQuICovXG4gIGZ1bmN0aW9uIGNvbnZlcnRUZW1wKHRlbXApIHtcbiAgICBpZiAocGFyYW1zLnVuaXQgPT09IFwiY2Vsc2l1c1wiKSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoKCh0ZW1wIC0gMzIpICogNSAvIDkuMCksIDEwKTtcbiAgICB9XG4gICAgLy8gRGVmYXVsdCB0ZW1wZXJhdHVyZSBpcyBpbiBGYWhyZW5oZWl0LlxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KHRlbXAsIDEwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBwcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSwgdHJ1ZSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBzZXRQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciBhZGRyZXNzO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhcmFtcyA9IEpTT04ucGFyc2UodmFsdWVzWzBdKTtcblxuICAgICAgICAvLyBMb2FkIGZvbnRzLlxuICAgICAgICB2YXIgZm9udFNldHRpbmdzID0gW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJjdXJyZW50LXRtZXBcIixcbiAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjogcGFyYW1zLmN1cnJlbnRUZW1wRm9udFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImZvcmVjYXN0LXRlbXBcIixcbiAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjogcGFyYW1zLmZvcmVjYXN0VGVtcEZvbnRcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiY2xhc3NcIjogXCJmb3JlY2FzdC1kYXlcIixcbiAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjogcGFyYW1zLmZvcmVjYXN0RGF5Rm9udFxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJjbGFzc1wiOiBcImFkZHJlc3NcIixcbiAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjogcGFyYW1zLmFkZHJlc3NGb250XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcImNsYXNzXCI6IFwiaHVtaWRpdHlcIixcbiAgICAgICAgICAgIFwiZm9udFNldHRpbmdcIjogcGFyYW1zLmh1bWlkaXR5Rm9udFxuICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICB1dGlscy5sb2FkRm9udHMoZm9udFNldHRpbmdzKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gcGFyYW1zLmJhY2tncm91bmQuY29sb3I7XG5cbiAgICAgICAgaWYgKCFwYXJhbXMudGVybXMpIHtcbiAgICAgICAgICAkKFwiLmNvbnRhaW5lclwiKS5oaWRlKCk7XG4gICAgICAgICAgJChcIi5lcnJvclwiKS50ZXh0KFwiWW91IG11c3QgY2hlY2sgdGhlIEFjY2VwdGFuY2Ugc2V0dGluZyBpbiBvcmRlciB0byB1c2UgdGhpcyBHYWRnZXQuXCIpLnNob3coKTtcbiAgICAgICAgICByZWFkeSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8kY29udGFpbmVyLmhlaWdodChwcmVmcy5nZXRJbnQoXCJyc0hcIikpOyAvLyBOZWVkZWQ/XG4gICAgICAgIGdldFdlYXRoZXIoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShuYW1lcykgJiYgbmFtZXMubGVuZ3RoID4gMCAmJiBuYW1lc1swXSA9PT0gXCJkaXNwbGF5QWRkcmVzc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFkZHJlc3MgPSBKU09OLnBhcnNlKHZhbHVlc1swXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcInNldFBhcmFtc1wiOiBzZXRQYXJhbXNcbiAgfTtcbn0pKGdhZGdldHMsIGNvbmZpZywgaTE4bik7XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLldlYXRoZXIgPSBSaXNlVmlzaW9uLldlYXRoZXIgfHwge307XG5SaXNlVmlzaW9uLldlYXRoZXIuUHJvdmlkZXIgPSB7fTtcblxuUmlzZVZpc2lvbi5XZWF0aGVyLlByb3ZpZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXQodXJsLCBjYWxsYmFja3MpIHtcbiAgICB2YXIgcGFyYW1zID0ge307XG5cbiAgICBwYXJhbXNbZ2FkZ2V0cy5pby5SZXF1ZXN0UGFyYW1ldGVycy5DT05URU5UX1RZUEVdID0gZ2FkZ2V0cy5pby5Db250ZW50VHlwZS5ET007XG5cbiAgICBnYWRnZXRzLmlvLm1ha2VSZXF1ZXN0KHVybCwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgaWYgKHJlc3AgJiYgcmVzcC5kYXRhKSB7XG4gICAgICAgIGlmIChjYWxsYmFja3MgJiYgY2FsbGJhY2tzLnN1Y2Nlc3MgJiYgdHlwZW9mKGNhbGxiYWNrcy5zdWNjZXNzKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MocmVzcC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzcCAmJiByZXNwLmVycm9ycykge1xuICAgICAgICBpZiAoY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5lcnJvciAmJiB0eXBlb2YoY2FsbGJhY2tzLmVycm9yKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY2FsbGJhY2tzLmVycm9yKHJlc3AuZXJyb3JzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHBhcmFtcyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0V2VhdGhlclwiOiBnZXRcbiAgfTtcbn0pKCk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2VhdGhlciA9IFJpc2VWaXNpb24uV2VhdGhlciB8fCB7fTtcblxuUmlzZVZpc2lvbi5XZWF0aGVyLkdlb2xvY2F0aW9uID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBlcnJvckludGVydmFsID0gNjAwMDA7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuXG4gIC8qIFVzZSBnZW9sb2NhdGlvbiB0byBkZXRlcm1pbmUgdGhlIGxvY2F0aW9uIG9mIHRoZSBkaXNwbGF5LiAqL1xuICBmdW5jdGlvbiBnZXQoY2FsbGJhY2tzKSB7XG4gICAgdmFyIHdlYXRoZXJVcmwgPSBcIlwiO1xuXG4gICAgaWYgKCEhbmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7XG4gICAgICAvLyBUaGlzIGZ1bmN0aW9uIHdpbGwgcmVjb3ZlciBvbiBpdHMgb3duIGlmIHRoZSBJbnRlcm5ldCBpcyBkaXNjb25uZWN0ZWQuXG4gICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHdlYXRoZXJVcmwgPSBjb25maWcudXJsQnlMb2NhdGlvbiArIFwiJmxhdD1cIiArIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSArXG4gICAgICAgICAgXCImbG9uPVwiICsgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSArIFwiJmR1bW15PVwiICsgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuXG4gICAgICAgIFJpc2VWaXNpb24uV2VhdGhlci5Qcm92aWRlci5nZXRXZWF0aGVyKHdlYXRoZXJVcmwsIHtcbiAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3Muc3VjY2VzcyAmJiB0eXBlb2YoY2FsbGJhY2tzLnN1Y2Nlc3MpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBcImVycm9yXCI6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3MuZXJyb3IgJiYgdHlwZW9mKGNhbGxiYWNrcy5lcnJvcikgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoZXJyb3JzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgZ2V0KCk7XG4gICAgICAgIH0sIGVycm9ySW50ZXJ2YWwpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIG9idGFpbiBnZW9sb2NhdGlvbiBwb3NpdGlvbi5cIik7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0V2VhdGhlclwiOiBnZXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2VhdGhlciA9IFJpc2VWaXNpb24uV2VhdGhlciB8fCB7fTtcblxuUmlzZVZpc2lvbi5XZWF0aGVyLkRpc3BsYXlBZGRyZXNzID0gZnVuY3Rpb24oZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgY2FsbGJhY2tzID0gbnVsbDtcblxuICAvKlxuICAgKiAgUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBzZXRQYXJhbXMobmFtZXMsIHZhbHVlcykge1xuICAgIHZhciB3ZWF0aGVyVXJsID0gXCJcIixcbiAgICAgIGFkZHJlc3MgPSBcIlwiO1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiZGlzcGxheUFkZHJlc3NcIikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVzKSAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBhZGRyZXNzID0gSlNPTi5wYXJzZSh2YWx1ZXNbMF0pO1xuXG4gICAgICAgIC8vIE9ubHkgbmVlZCB0byB1c2UgYW5kIHNob3cgY2l0eSBhbmQgcHJvdmluY2UuXG4gICAgICAgIHdlYXRoZXJVcmwgPSB3ZWF0aGVyVXJsICsgXCImbmFtZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhZGRyZXNzLmNpdHkgKyBcIixcIiArIGFkZHJlc3MucHJvdmluY2UpICsgXCImZHVtbXk9XCIgKyBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMCk7XG4gICAgICB9XG5cbiAgICAgIFJpc2VWaXNpb24uV2VhdGhlci5Qcm92aWRlci5nZXRXZWF0aGVyKHdlYXRoZXJVcmwsIHtcbiAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5zdWNjZXNzICYmIHR5cGVvZihjYWxsYmFja3Muc3VjY2VzcykgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY2FsbGJhY2tzLnN1Y2Nlc3MoZGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImVycm9yXCI6IGZ1bmN0aW9uKGVycm9ycykge1xuICAgICAgICAgIGlmIChjYWxsYmFja3MgJiYgY2FsbGJhY2tzLmVycm9yICYmIHR5cGVvZihjYWxsYmFja3MuZXJyb3IpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5lcnJvcihlcnJvcnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuXG4gIC8qIE1ha2UgYSBjYWxsIHRvIHRoZSBSaXNlIFZpc2lvbiBBUEkgdG8gZ2V0IHRoZSBhZGRyZXNzIG9mIHRoZSBkaXNwbGF5LiAqL1xuICBmdW5jdGlvbiBnZXQoY2IpIHtcbiAgICB2YXIgaWQgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLmdldFN0cmluZyhcImlkXCIpO1xuXG4gICAgY2FsbGJhY2tzID0gY2I7XG5cbiAgICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgc2V0UGFyYW1zKTtcbiAgICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgXCJkaXNwbGF5QWRkcmVzc1wiKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiZ2V0V2VhdGhlclwiOiBnZXRcbiAgfTtcbn07XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uV2VhdGhlciA9IFJpc2VWaXNpb24uV2VhdGhlciB8fCB7fTtcblxuUmlzZVZpc2lvbi5XZWF0aGVyLkN1c3RvbUFkZHJlc3MgPSBmdW5jdGlvbihjb25maWcpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBnZXQoYWRkcmVzcywgY2FsbGJhY2tzKSB7XG4gICAgdmFyIHdlYXRoZXJVcmwgPSBcIlwiO1xuXG4gICAgaWYgKGFkZHJlc3MgIT09IFwiXCIpIHtcbiAgICAgIHdlYXRoZXJVcmwgPSBjb25maWcudXJsQnlOYW1lICsgXCImbmFtZT1cIiArIGVuY29kZVVSSUNvbXBvbmVudChhZGRyZXNzKSArXG4gICAgICAgIFwiJmR1bW15PVwiICsgTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiAxMDApO1xuXG4gICAgICBSaXNlVmlzaW9uLldlYXRoZXIuUHJvdmlkZXIuZ2V0V2VhdGhlcih3ZWF0aGVyVXJsLCB7XG4gICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGNhbGxiYWNrcyAmJiBjYWxsYmFja3Muc3VjY2VzcyAmJiB0eXBlb2YoY2FsbGJhY2tzLnN1Y2Nlc3MpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrcy5zdWNjZXNzKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJlcnJvclwiOiBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICAgICAgICBpZiAoY2FsbGJhY2tzICYmIGNhbGxiYWNrcy5lcnJvciAmJiB0eXBlb2YoY2FsbGJhY2tzLmVycm9yKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjYWxsYmFja3MuZXJyb3IoZXJyb3JzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgXCJnZXRXZWF0aGVyXCI6IGdldFxuICB9O1xufTtcblxuLyogZ2xvYmFsIFJpc2VWaXNpb24sIGdhZGdldHMsIGdvb2dsZSAqL1xuKGZ1bmN0aW9uICh3aW5kb3csIGRvY3VtZW50LCBnb29nbGUsIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIHByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKSxcbiAgICBpZCA9IHByZWZzLmdldFN0cmluZyhcImlkXCIpO1xuXG4gIC8vIERpc2FibGUgY29udGV4dCBtZW51IChyaWdodCBjbGljayBtZW51KVxuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgZG9jdW1lbnQuYm9keS5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBnb29nbGUuc2V0T25Mb2FkQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgUmlzZVZpc2lvbi5XZWF0aGVyLnNldFBhcmFtcyk7XG4gICAgZ2FkZ2V0cy5ycGMuY2FsbChcIlwiLCBcInJzcGFyYW1fZ2V0XCIsIG51bGwsIGlkLCBbXCJhZGRpdGlvbmFsUGFyYW1zXCJdKTtcbiAgfSk7XG59KSh3aW5kb3csIGRvY3VtZW50LCBnb29nbGUsIGdhZGdldHMpO1xuXG4vKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovXG52YXIgX2dhcSA9IF9nYXEgfHwgW107XG5cbl9nYXEucHVzaChbJ19zZXRBY2NvdW50JywgJ1VBLTQxMzk1MzQ4LTUnXSk7XG5fZ2FxLnB1c2goWydfdHJhY2tQYWdldmlldyddKTtcblxuKGZ1bmN0aW9uKCkge1xuICB2YXIgZ2EgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgZ2EudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICBnYS5hc3luYyA9IHRydWU7XG4gIGdhLnNyYyA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovL3NzbCcgOiAnaHR0cDovL3d3dycpICsgJy5nb29nbGUtYW5hbHl0aWNzLmNvbS9nYS5qcyc7XG4gIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdO1xuICBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTtcbn0pKCk7XG4vKiBqc2hpbnQgaWdub3JlOmVuZCAqL1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9